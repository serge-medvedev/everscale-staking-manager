[![sergemedvedev/freeton-validator](https://img.shields.io/docker/cloud/build/sergemedvedev/freeton-validator.svg)](https://hub.docker.com/r/sergemedvedev/freeton-validator)

# FreeTON Validator in Node.js

## HOWTO

- Refer to [config.js.example](config.js.example) to create the config file
- Make sure you have the client private key and the server public key, generated by _setup.sh_ script during validator engine initialization
- Build the image and run a container with [docker-compose](docker-compose.yml):
    ```yaml
    version: "2.3"
    services:
      freeton-validator:
        image: freeton-validator
        build: .
        volumes:
          - ./config.js:/usr/src/app/config.js:ro
          - ./certs:/usr/src/app/certs:ro
          - ./db:/data/freeton-validator
        ports:
          - "3000:3000"
        environment:
          DEBUG: api,validator
        restart: always
    ```
    ```console
    $ docker-compose up -d --build
    ```

## API Reference

### GET /runOnce
Sends and recovers stakes (use crontab to schedule calls)

Example:
```console
$ curl -s localhost:3000/runOnce

### then check out docker logs for additional info
```

---

### POST /nextStake?value=x
__x__ amount in tokens

Example:
```console
$ curl -s -XPOST localhost:3000/nextStake?value=20000

### your next stake will be 20000 tokens
```

---

### POST /nextElections/:action
__:action__ "skip" or "participate"

Example:
```console
$ curl -s -XPOST localhost:3000/nextElections/skip

### you won't take a part in the next elections
```

---

## TODO

- Add more HTTP API docs